<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Save Info - Note Taking App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        
        /* Animation for new note */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.3s ease-out forwards;
        }
        
        /* Custom checkbox */
        .custom-checkbox {
            appearance: none;
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border: 2px solid #4f46e5;
            border-radius: 4px;
            outline: none;
            cursor: pointer;
            position: relative;
        }
        
        .custom-checkbox:checked {
            background-color: #4f46e5;
        }
        
        .custom-checkbox:checked::after {
            content: '\2713';
            position: absolute;
            color: white;
            font-size: 14px;
            left: 3px;
            top: -1px;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen font-sans">
    <!-- App Container -->
    <div class="max-w-md mx-auto bg-white min-h-screen shadow-lg flex flex-col">
        <!-- Header -->
        <header class="bg-indigo-600 text-white p-4 sticky top-0 z-10 shadow-md">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-2">
                    <i class="fas fa-book text-xl"></i>
                    <h1 class="text-xl font-bold">Save Info</h1>
                </div>
                <div class="flex items-center space-x-3">
                    <button id="searchBtn" class="text-white hover:text-indigo-200 transition">
                        <i class="fas fa-search"></i>
                    </button>
                    <button id="sortBtn" class="text-white hover:text-indigo-200 transition">
                        <i class="fas fa-sort"></i>
                    </button>
                </div>
            </div>
            
            <!-- Search Bar (Hidden by default) -->
            <div id="searchBar" class="mt-3 hidden">
                <div class="relative">
                    <input type="text" placeholder="Search notes..." 
                           class="w-full py-2 px-4 pr-10 rounded-lg bg-indigo-500 text-white placeholder-indigo-200 focus:outline-none focus:ring-2 focus:ring-indigo-300">
                    <button class="absolute right-3 top-2 text-indigo-200">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
            </div>
            
            <!-- Sort Options (Hidden by default) -->
            <div id="sortOptions" class="mt-3 hidden bg-indigo-500 p-2 rounded-lg">
                <div class="flex items-center justify-between mb-2">
                    <span class="text-sm font-medium">Sort by:</span>
                    <button id="closeSort" class="text-indigo-200 hover:text-white">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="space-y-2">
                    <label class="flex items-center space-x-2 cursor-pointer">
                        <input type="radio" name="sort" value="date-desc" class="custom-checkbox" checked>
                        <span>Newest first</span>
                    </label>
                    <label class="flex items-center space-x-2 cursor-pointer">
                        <input type="radio" name="sort" value="date-asc" class="custom-checkbox">
                        <span>Oldest first</span>
                    </label>
                    <label class="flex items-center space-x-2 cursor-pointer">
                        <input type="radio" name="sort" value="title-asc" class="custom-checkbox">
                        <span>Title (A-Z)</span>
                    </label>
                    <label class="flex items-center space-x-2 cursor-pointer">
                        <input type="radio" name="sort" value="title-desc" class="custom-checkbox">
                        <span>Title (Z-A)</span>
                    </label>
                </div>
            </div>
        </header>
        
        <!-- Main Content -->
        <main class="flex-1 overflow-y-auto p-4">
            <!-- Empty State -->
            <div id="emptyState" class="text-center py-10 hidden">
                <div class="mx-auto w-24 h-24 bg-indigo-100 rounded-full flex items-center justify-center mb-4">
                    <i class="fas fa-book-open text-indigo-500 text-3xl"></i>
                </div>
                <h3 class="text-lg font-medium text-gray-700 mb-2">No notes yet</h3>
                <p class="text-gray-500 mb-4">Tap the + button to create your first note</p>
                <button id="createFirstNote" class="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition">
                    Create Note
                </button>
            </div>
            
            <!-- Notes List -->
            <div id="notesList" class="space-y-3">
                <!-- Notes will be added here dynamically -->
            </div>
        </main>
        
        <!-- Floating Action Button -->
        <div class="fixed bottom-6 right-6 z-20">
            <button id="addNoteBtn" class="w-14 h-14 bg-indigo-600 rounded-full shadow-lg text-white flex items-center justify-center hover:bg-indigo-700 transition transform hover:scale-105">
                <i class="fas fa-plus text-xl"></i>
            </button>
        </div>
        
        <!-- Note Editor Modal -->
        <div id="noteEditor" class="fixed inset-0 bg-black bg-opacity-50 z-30 flex items-center justify-center p-4 hidden">
            <div class="bg-white rounded-lg shadow-xl w-full max-w-md max-h-[90vh] flex flex-col">
                <!-- Editor Header -->
                <div class="border-b p-4 flex justify-between items-center">
                    <input type="text" id="noteTitle" placeholder="Note title" 
                           class="text-xl font-bold w-full focus:outline-none">
                    <button id="closeEditor" class="text-gray-500 hover:text-gray-700 ml-2">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <!-- Editor Content -->
                <div class="flex-1 overflow-y-auto p-4">
                    <textarea id="noteContent" placeholder="Start typing your note here..." 
                              class="w-full h-64 focus:outline-none resize-none"></textarea>
                </div>
                
                <!-- Editor Footer -->
                <div class="border-t p-3 flex justify-between items-center">
                    <div class="flex space-x-2">
                        <button id="setColor" class="w-6 h-6 rounded-full bg-indigo-500 border-2 border-white shadow-md hover:opacity-80 transition" 
                                data-color="indigo-500" title="Change color"></button>
                        <button class="w-6 h-6 rounded-full bg-red-400 border-2 border-white shadow-md hover:opacity-80 transition" 
                                data-color="red-400" title="Change color"></button>
                        <button class="w-6 h-6 rounded-full bg-yellow-400 border-2 border-white shadow-md hover:opacity-80 transition" 
                                data-color="yellow-400" title="Change color"></button>
                        <button class="w-6 h-6 rounded-full bg-green-400 border-2 border-white shadow-md hover:opacity-80 transition" 
                                data-color="green-400" title="Change color"></button>
                        <button class="w-6 h-6 rounded-full bg-blue-400 border-2 border-white shadow-md hover:opacity-80 transition" 
                                data-color="blue-400" title="Change color"></button>
                    </div>
                    <div>
                        <button id="saveNote" class="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition">
                            Save
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Confirmation Modal -->
        <div id="confirmModal" class="fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4 hidden">
            <div class="bg-white rounded-lg shadow-xl w-full max-w-md p-6">
                <h3 class="text-lg font-medium text-gray-900 mb-4">Delete this note?</h3>
                <p class="text-gray-500 mb-6">This action cannot be undone. The note will be permanently deleted.</p>
                <div class="flex justify-end space-x-3">
                    <button id="cancelDelete" class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition">
                        Cancel
                    </button>
                    <button id="confirmDelete" class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition">
                        Delete
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM Elements
            const notesList = document.getElementById('notesList');
            const emptyState = document.getElementById('emptyState');
            const addNoteBtn = document.getElementById('addNoteBtn');
            const createFirstNote = document.getElementById('createFirstNote');
            const noteEditor = document.getElementById('noteEditor');
            const noteTitle = document.getElementById('noteTitle');
            const noteContent = document.getElementById('noteContent');
            const saveNote = document.getElementById('saveNote');
            const closeEditor = document.getElementById('closeEditor');
            const confirmModal = document.getElementById('confirmModal');
            const cancelDelete = document.getElementById('cancelDelete');
            const confirmDelete = document.getElementById('confirmDelete');
            const searchBtn = document.getElementById('searchBtn');
            const searchBar = document.getElementById('searchBar');
            const sortBtn = document.getElementById('sortBtn');
            const sortOptions = document.getElementById('sortOptions');
            const closeSort = document.getElementById('closeSort');
            const colorButtons = document.querySelectorAll('[data-color]');
            const setColor = document.getElementById('setColor');
            
            // App State
            let notes = JSON.parse(localStorage.getItem('save-info-notes')) || [];
            let currentNoteId = null;
            let currentNoteColor = 'indigo-500';
            let isEditing = false;
            
            // Initialize the app
            function init() {
                renderNotes();
                updateEmptyState();
                
                // Check if this is the first visit
                if (!localStorage.getItem('save-info-first-visit')) {
                    setTimeout(() => {
                        const welcomeNote = {
                            id: Date.now().toString(),
                            title: 'Welcome to Save Info!',
                            content: 'This is your first note. You can edit it or create new ones by tapping the + button.',
                            color: 'indigo-500',
                            createdAt: new Date().toISOString(),
                            updatedAt: new Date().toISOString()
                        };
                        notes.unshift(welcomeNote);
                        saveNotes();
                        renderNotes();
                        updateEmptyState();
                    }, 500);
                    localStorage.setItem('save-info-first-visit', 'true');
                }
            }
            
            // Save notes to localStorage
            function saveNotes() {
                localStorage.setItem('save-info-notes', JSON.stringify(notes));
            }
            
            // Render notes to the UI
            function renderNotes() {
                notesList.innerHTML = '';
                
                if (notes.length === 0) {
                    updateEmptyState();
                    return;
                }
                
                // Sort notes (default: newest first)
                const sortedNotes = [...notes].sort((a, b) => {
                    return new Date(b.updatedAt) - new Date(a.updatedAt);
                });
                
                sortedNotes.forEach(note => {
                    const noteElement = createNoteElement(note);
                    notesList.appendChild(noteElement);
                });
                
                updateEmptyState();
            }
            
            // Create a note element
            function createNoteElement(note) {
                const noteElement = document.createElement('div');
                noteElement.className = `bg-white rounded-lg shadow-sm border-l-4 border-${note.color} p-4 cursor-pointer hover:shadow-md transition fade-in`;
                noteElement.dataset.id = note.id;
                
                const date = new Date(note.updatedAt);
                const formattedDate = date.toLocaleDateString('en-US', { 
                    month: 'short', 
                    day: 'numeric',
                    year: date.getFullYear() !== new Date().getFullYear() ? 'numeric' : undefined
                });
                
                noteElement.innerHTML = `
                    <div class="flex justify-between items-start mb-2">
                        <h3 class="font-medium text-gray-900 truncate">${note.title || 'Untitled Note'}</h3>
                        <button class="text-gray-400 hover:text-gray-600 delete-note" data-id="${note.id}">
                            <i class="fas fa-trash-alt"></i>
                        </button>
                    </div>
                    <p class="text-gray-500 text-sm mb-3 line-clamp-3">${note.content || ''}</p>
                    <div class="flex justify-between items-center text-xs text-gray-400">
                        <span>${formattedDate}</span>
                        <button class="text-${note.color} hover:text-${note.color.replace('400', '500').replace('500', '600')} edit-note" data-id="${note.id}">
                            <i class="fas fa-edit"></i>
                        </button>
                    </div>
                `;
                
                // Add click event to open the note
                noteElement.addEventListener('click', (e) => {
                    if (!e.target.classList.contains('delete-note') && !e.target.closest('.delete-note') && 
                        !e.target.classList.contains('edit-note') && !e.target.closest('.edit-note')) {
                        openEditor(note.id);
                    }
                });
                
                // Add edit button event
                const editBtn = noteElement.querySelector('.edit-note');
                editBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    openEditor(note.id);
                });
                
                // Add delete button event
                const deleteBtn = noteElement.querySelector('.delete-note');
                deleteBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    showDeleteConfirmation(note.id);
                });
                
                return noteElement;
            }
            
            // Update empty state visibility
            function updateEmptyState() {
                if (notes.length === 0) {
                    emptyState.classList.remove('hidden');
                    notesList.classList.add('hidden');
                } else {
                    emptyState.classList.add('hidden');
                    notesList.classList.remove('hidden');
                }
            }
            
            // Open note editor
            function openEditor(noteId = null) {
                isEditing = noteId !== null;
                currentNoteId = noteId;
                
                if (isEditing) {
                    const note = notes.find(n => n.id === noteId);
                    noteTitle.value = note.title || '';
                    noteContent.value = note.content || '';
                    currentNoteColor = note.color;
                    updateColorButton(note.color);
                } else {
                    noteTitle.value = '';
                    noteContent.value = '';
                    currentNoteColor = 'indigo-500';
                    updateColorButton('indigo-500');
                }
                
                noteEditor.classList.remove('hidden');
                noteTitle.focus();
            }
            
            // Close note editor
            function closeEditorModal() {
                noteEditor.classList.add('hidden');
                currentNoteId = null;
            }
            
            // Save note
            function saveCurrentNote() {
                const title = noteTitle.value.trim();
                const content = noteContent.value.trim();
                
                if (!title && !content) {
                    // Don't save empty notes
                    closeEditorModal();
                    return;
                }
                
                const now = new Date().toISOString();
                
                if (isEditing) {
                    // Update existing note
                    const noteIndex = notes.findIndex(n => n.id === currentNoteId);
                    if (noteIndex !== -1) {
                        notes[noteIndex] = {
                            ...notes[noteIndex],
                            title,
                            content,
                            color: currentNoteColor,
                            updatedAt: now
                        };
                    }
                } else {
                    // Create new note
                    const newNote = {
                        id: Date.now().toString(),
                        title,
                        content,
                        color: currentNoteColor,
                        createdAt: now,
                        updatedAt: now
                    };
                    notes.unshift(newNote);
                }
                
                saveNotes();
                renderNotes();
                closeEditorModal();
            }
            
            // Show delete confirmation
            function showDeleteConfirmation(noteId) {
                currentNoteId = noteId;
                confirmModal.classList.remove('hidden');
            }
            
            // Delete note
            function deleteCurrentNote() {
                notes = notes.filter(note => note.id !== currentNoteId);
                saveNotes();
                renderNotes();
                confirmModal.classList.add('hidden');
                currentNoteId = null;
            }
            
            // Update color button
            function updateColorButton(color) {
                setColor.className = `w-6 h-6 rounded-full bg-${color} border-2 border-white shadow-md hover:opacity-80 transition`;
                setColor.dataset.color = color;
            }
            
            // Event Listeners
            addNoteBtn.addEventListener('click', () => openEditor());
            createFirstNote.addEventListener('click', () => openEditor());
            
            closeEditor.addEventListener('click', closeEditorModal);
            
            saveNote.addEventListener('click', saveCurrentNote);
            
            // Save on Ctrl+Enter
            noteContent.addEventListener('keydown', (e) => {
                if (e.ctrlKey && e.key === 'Enter') {
                    saveCurrentNote();
                }
            });
            
            cancelDelete.addEventListener('click', () => {
                confirmModal.classList.add('hidden');
                currentNoteId = null;
            });
            
            confirmDelete.addEventListener('click', deleteCurrentNote);
            
            // Search functionality
            searchBtn.addEventListener('click', () => {
                searchBar.classList.toggle('hidden');
                sortOptions.classList.add('hidden');
            });
            
            // Sort functionality
            sortBtn.addEventListener('click', () => {
                sortOptions.classList.toggle('hidden');
                searchBar.classList.add('hidden');
            });
            
            closeSort.addEventListener('click', () => {
                sortOptions.classList.add('hidden');
            });
            
            // Color selection
            colorButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const color = button.dataset.color;
                    currentNoteColor = color;
                    updateColorButton(color);
                });
            });
            
            // Initialize the app
            init();
        });
    </script>
</body>
</html>
